autoload -U +X compinit && compinit
autoload -U +X bashcompinit && bashcompinit

complete_gs () {
    GS_REPOS='/Users/atsushitoda/Workspace/'

    cdg () {
        if [[ -z "$1" ]]
        then
            cd $GS_REPOS/ && ls -1
        else
            if [ -d $GS_REPOS/$1 ];
            then
                cd $GS_REPOS/$1
                if [ -f .venv/bin/activate ]; then
                    . .venv/bin/activate
                elif [ -f env/bin/activate ]; then
                    . env/bin/activate
                fi
            fi
        fi

    }

    _cdg() {
        COMPREPLY=()
        local cur projects
        projects=$(ls $GS_REPOS)
        _get_comp_words_by_ref cur
        COMPREPLY=( $(compgen -W "${projects}" -- ${cur}) )
    }
    complete _cdg cdg
}



complete_gs
